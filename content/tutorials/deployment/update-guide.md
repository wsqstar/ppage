---
title: PPage æ›´æ–°æŒ‡å—
id: update-guide
type: page
collection: tutorials
parent: deployment-index
order: 2
date: 2025-12-31
author: System
tags: [tutorial, update, maintenance]
category: æ•™ç¨‹
---

# PPage æ›´æ–°æŒ‡å—

## æ¦‚è¿°

å½“ä½  fork äº† PPage ä»“åº“å¹¶è‡ªå®šä¹‰äº†å†…å®¹åï¼Œä½ å¯ä»¥å®‰å…¨åœ°è·å–ä¸Šæ¸¸ä»“åº“çš„æœ€æ–°åŠŸèƒ½å’Œ bug ä¿®å¤ã€‚æœ¬æŒ‡å—å°†å¸®åŠ©ä½ å®‰å…¨åœ°æ›´æ–°ä»£ç ï¼ŒåŒæ—¶ä¿æŠ¤ä½ çš„è‡ªå®šä¹‰é…ç½®å’Œå†…å®¹ã€‚

## ğŸ”’ æ ¸å¿ƒæœºåˆ¶ï¼šGit Merge Strategy

æˆ‘ä»¬ä½¿ç”¨ **Git çš„åˆå¹¶ç­–ç•¥**æ¥ä¿æŠ¤ä½ çš„æ–‡ä»¶ï¼š

1. **ç”¨æˆ·å†…å®¹æäº¤åˆ° Git** - ä½ çš„é…ç½®å’Œå†…å®¹ä¹Ÿä¼šè¢« Git ç®¡ç†
2. **`.gitattributes` é…ç½®** - æŒ‡å®šå“ªäº›æ–‡ä»¶åœ¨åˆå¹¶æ—¶ä¿ç•™ä½ çš„ç‰ˆæœ¬
3. **è‡ªåŠ¨ä¿æŠ¤** - åˆå¹¶æ—¶ Git ä¼šè‡ªåŠ¨ä¿æŠ¤è¿™äº›æ–‡ä»¶ï¼Œä¸ä¼šè¢«ä¸Šæ¸¸è¦†ç›–

## ğŸ”’ å—ä¿æŠ¤çš„æ–‡ä»¶

ä»¥ä¸‹æ–‡ä»¶å’Œç›®å½•é€šè¿‡ `.gitattributes` é…ç½®ï¼Œåœ¨æ›´æ–°è¿‡ç¨‹ä¸­ä¼šè‡ªåŠ¨ä¿æŠ¤ï¼Œ**å§‹ç»ˆä¿ç•™ä½ çš„ç‰ˆæœ¬**ï¼š

- `public/config.yml` - ä½ çš„ç«™ç‚¹é…ç½®æ–‡ä»¶
- `content/**` - ä½ çš„æ‰€æœ‰å†…å®¹ï¼ˆåšå®¢ã€é¡µé¢ã€æ–‡ä»¶ï¼‰
- `public/assets/**` - ä½ çš„èµ„æºæ–‡ä»¶ï¼ˆå›¾ç‰‡ã€å›¾æ ‡ç­‰ï¼‰
- `_template/**` - å½’æ¡£çš„æ¨¡æ¿æ–‡ä»¶
- `scripts/deploy.sh` - ä½ çš„éƒ¨ç½²è„šæœ¬

**å·¥ä½œåŸç†**ï¼š

```bash
# æŸ¥çœ‹ .gitattributes é…ç½®
cat .gitattributes

# è¾“å‡ºç¤ºä¾‹ï¼š
public/config.yml merge=ours
content/** merge=ours
# ...
```

`merge=ours` è¡¨ç¤ºåœ¨åˆå¹¶å†²çªæ—¶ï¼Œ**å§‹ç»ˆä½¿ç”¨æˆ‘ä»¬çš„ç‰ˆæœ¬**ï¼ˆyoursï¼‰ï¼Œè€Œä¸æ˜¯ä¸Šæ¸¸çš„ç‰ˆæœ¬ã€‚

## ğŸš€ å¿«é€Ÿæ›´æ–°

### æ–¹å¼ä¸€ï¼šä½¿ç”¨ update å‘½ä»¤ï¼ˆæ¨èï¼‰

```bash
npm run update
```

è¿™ä¸ªå‘½ä»¤ä¼šè‡ªåŠ¨ï¼š
1. âœ… æ£€æŸ¥ Git çŠ¶æ€
2. âœ… é…ç½®ä¸Šæ¸¸ä»“åº“ï¼ˆå¦‚æœæœªé…ç½®ï¼‰
3. âœ… é…ç½® Git åˆå¹¶ç­–ç•¥
4. âœ… æ‹‰å–å¹¶åˆå¹¶ä¸Šæ¸¸æ›´æ–°
5. âœ… è‡ªåŠ¨ä¿æŠ¤ä½ çš„ç”¨æˆ·æ–‡ä»¶
6. âœ… æ›´æ–°ä¾èµ–åŒ…

### æ–¹å¼äºŒï¼šæ‰‹åŠ¨æ›´æ–°

å¦‚æœä½ æƒ³æ›´ç²¾ç»†åœ°æ§åˆ¶æ›´æ–°è¿‡ç¨‹ï¼š

```bash
# 1. æäº¤å½“å‰æ›´æ”¹
git add .
git commit -m "Save my changes"

# 2. é…ç½®ä¸Šæ¸¸ä»“åº“ï¼ˆé¦–æ¬¡éœ€è¦ï¼‰
git remote add upstream https://github.com/mappedinfo/ppage.git

# 3. é…ç½® Git åˆå¹¶ç­–ç•¥ï¼ˆé¦–æ¬¡éœ€è¦ï¼‰
git config merge.ours.driver true

# 4. è·å–ä¸Šæ¸¸æ›´æ–°
git fetch upstream

# 5. æŸ¥çœ‹æ›´æ–°å†…å®¹ï¼ˆå¯é€‰ï¼‰
git log HEAD..upstream/main --oneline

# 6. åˆå¹¶æ›´æ–° - ä½ çš„ç”¨æˆ·æ–‡ä»¶ä¼šè‡ªåŠ¨ä¿æŠ¤ï¼
git merge upstream/main

# 7. æ›´æ–°ä¾èµ–
npm install

# 8. æ¨é€åˆ°ä½ çš„ä»“åº“
git push origin main
```

## ğŸ“‹ å®Œæ•´å·¥ä½œæµç¨‹

### 1. å‡†å¤‡å·¥ä½œ

åœ¨æ›´æ–°å‰ï¼Œå…ˆæäº¤ä½ çš„æ›´æ”¹ï¼š

```bash
# æŸ¥çœ‹å½“å‰çŠ¶æ€
git status

# æäº¤æ›´æ”¹
git add .
git commit -m "Save my changes before update"
```

**é‡è¦**ï¼šå¿…é¡»å…ˆæäº¤æ›´æ”¹ï¼Œå¦åˆ™ `npm run update` ä¼šæç¤ºä½ å…ˆæäº¤ã€‚

### 2. è¿è¡Œæ›´æ–°

```bash
npm run update
```

**è¾“å‡ºç¤ºä¾‹**ï¼š

```
ğŸš€ å¼€å§‹æ›´æ–° PPage ä»£ç ...

âš™ï¸  é…ç½® Git åˆå¹¶ç­–ç•¥...
  âœ“ åˆå¹¶ç­–ç•¥é…ç½®å®Œæˆ

ğŸ“¡ é…ç½®ä¸Šæ¸¸ä»“åº“...
  âœ“ å·²æ·»åŠ ä¸Šæ¸¸ä»“åº“

ğŸ”„ æ‹‰å–ä¸Šæ¸¸æ›´æ–°...

ğŸ”€ åˆå¹¶ä¸Šæ¸¸æ›´æ–°åˆ° main åˆ†æ”¯...
   ğŸ’¡ .gitattributes ä¸­é…ç½®çš„æ–‡ä»¶ä¼šè‡ªåŠ¨ä¿ç•™ä½ çš„ç‰ˆæœ¬

  âœ“ åˆå¹¶æˆåŠŸï¼

ğŸ“¦ æ›´æ–°ä¾èµ–åŒ…...
  âœ“ ä¾èµ–æ›´æ–°å®Œæˆ

âœ¨ æ›´æ–°å®Œæˆï¼
```

### 3. æµ‹è¯•æ›´æ–°

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# æ£€æŸ¥ä½ çš„é…ç½®å’Œå†…å®¹æ˜¯å¦æ­£å¸¸
```

### 4. æ¨é€åˆ°ä½ çš„ä»“åº“

```bash
# æ¨é€æ›´æ–°åˆ°ä½ çš„ fork
git push origin main
```

## ğŸ”„ æ›´æ–°æµç¨‹è¯¦è§£

### è‡ªåŠ¨å¤‡ä»½æœºåˆ¶

`npm run update` ä¼šåœ¨æ›´æ–°å‰è‡ªåŠ¨åˆ›å»ºå¤‡ä»½ï¼š

1. åˆ›å»ºä¸´æ—¶å¤‡ä»½ç›®å½• `.backup-[æ—¶é—´æˆ³]`
2. å¤åˆ¶æ‰€æœ‰å—ä¿æŠ¤çš„æ–‡ä»¶åˆ°å¤‡ä»½ç›®å½•
3. æ‰§è¡Œæ›´æ–°æ“ä½œ
4. æ¢å¤å—ä¿æŠ¤çš„æ–‡ä»¶
5. æ¸…ç†å¤‡ä»½ç›®å½•

å¦‚æœæ›´æ–°å¤±è´¥ï¼Œå¤‡ä»½ä¼šè¢«ä¿ç•™ï¼Œä½ å¯ä»¥æ‰‹åŠ¨æ¢å¤ã€‚

### å†²çªå¤„ç†

å¦‚æœåœ¨åˆå¹¶æ—¶å‡ºç°å†²çªï¼š

1. æ›´æ–°è„šæœ¬ä¼šè‡ªåŠ¨æ¢å¤ä½ çš„ç”¨æˆ·æ–‡ä»¶
2. ä½ éœ€è¦æ‰‹åŠ¨è§£å†³ä»£ç å†²çª
3. è§£å†³åè¿è¡Œï¼š
   ```bash
   git add .
   git commit -m "Resolve merge conflicts"
   ```

## ğŸ“ æ–‡ä»¶ç»„ç»‡å»ºè®®

ä¸ºäº†æ›´å¥½åœ°ç®¡ç†æ›´æ–°ï¼Œå»ºè®®ï¼š

### âœ… æ¨èåšæ³•

- **ç”¨æˆ·å†…å®¹** æ”¾åœ¨ `content/` ç›®å½•ä¸‹
- **ç”¨æˆ·é…ç½®** ä½¿ç”¨ `public/config.yml`
- **ç”¨æˆ·èµ„æº** æ”¾åœ¨ `public/assets/` ç›®å½•ä¸‹
- **è‡ªå®šä¹‰è„šæœ¬** æ”¾åœ¨ `scripts/deploy.sh` æˆ–å…¶ä»–è‡ªå®šä¹‰è„šæœ¬æ–‡ä»¶ä¸­

### âŒ é¿å…åšæ³•

- ä¸è¦ç›´æ¥ä¿®æ”¹ `src/` ç›®å½•ä¸‹çš„æºä»£ç 
- ä¸è¦ä¿®æ”¹ `scripts/init.js` å’Œ `scripts/update.js`
- å¦‚æœéœ€è¦ä¿®æ”¹æºä»£ç ï¼Œå»ºè®®ï¼š
  - Fork ååˆ›å»ºæ–°åˆ†æ”¯
  - æäº¤ Pull Request åˆ°ä¸Šæ¸¸
  - æˆ–è€…åœ¨ä½ çš„åˆ†æ”¯ä¸Šç»´æŠ¤è¡¥ä¸

## ğŸ”§ é…ç½®ä¸Šæ¸¸ä»“åº“

### æŸ¥çœ‹å·²é…ç½®çš„è¿œç¨‹ä»“åº“

```bash
git remote -v
```

ä½ åº”è¯¥çœ‹åˆ°ï¼š
```
origin    https://github.com/yourusername/ppage.git (fetch)
origin    https://github.com/yourusername/ppage.git (push)
upstream  https://github.com/mappedinfo/ppage.git (fetch)
upstream  https://github.com/mappedinfo/ppage.git (push)
```

### æ‰‹åŠ¨é…ç½®ä¸Šæ¸¸ä»“åº“

å¦‚æœæ²¡æœ‰ upstreamï¼š

```bash
git remote add upstream https://github.com/mappedinfo/ppage.git
```

### æ›´æ¢ä¸Šæ¸¸ä»“åº“åœ°å€

```bash
git remote set-url upstream https://github.com/mappedinfo/ppage.git
```

## ğŸ› å¸¸è§é—®é¢˜

### Q: æ›´æ–°åæˆ‘çš„é…ç½®ä¸¢å¤±äº†æ€ä¹ˆåŠï¼Ÿ

A: å¦‚æœä½¿ç”¨ `npm run update`ï¼Œä½ çš„é…ç½®ä¼šè¢«è‡ªåŠ¨ä¿æŠ¤å’Œæ¢å¤ã€‚å¦‚æœæ‰‹åŠ¨æ›´æ–°å¯¼è‡´é…ç½®ä¸¢å¤±ï¼Œå¯ä»¥ä»ä»¥ä¸‹ä½ç½®æ¢å¤ï¼š

1. Git å†å²è®°å½•ï¼š`git checkout HEAD~1 -- public/config.yml`
2. å¤‡ä»½ç›®å½•ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ï¼š`.backup-[æ—¶é—´æˆ³]/`
3. `_template/` ç›®å½•ï¼ˆå¦‚æœä¹‹å‰è¿è¡Œè¿‡ initï¼‰

### Q: æ›´æ–°æ—¶å‡ºç°å†²çªæ€ä¹ˆåŠï¼Ÿ

A: 
1. ä½¿ç”¨ `npm run update` æ—¶ï¼Œä½ çš„ç”¨æˆ·æ–‡ä»¶ä¼šè¢«è‡ªåŠ¨æ¢å¤
2. åªéœ€è¦è§£å†³ä»£ç æ–‡ä»¶çš„å†²çª
3. è¿è¡Œ `git status` æŸ¥çœ‹å†²çªæ–‡ä»¶
4. ç¼–è¾‘å†²çªæ–‡ä»¶ï¼Œè§£å†³å†²çªæ ‡è®°ï¼ˆ`<<<<<<<`, `=======`, `>>>>>>>`ï¼‰
5. è¿è¡Œ `git add . && git commit`

### Q: æˆ‘ä¿®æ”¹äº†æºä»£ç ï¼Œæ›´æ–°ä¼šè¦†ç›–å—ï¼Ÿ

A: æ˜¯çš„ï¼Œå¯¹ `src/` ç›®å½•çš„ä¿®æ”¹å¯èƒ½ä¼šè¢«è¦†ç›–æˆ–äº§ç”Ÿå†²çªã€‚å»ºè®®ï¼š

- **æ–¹æ¡ˆä¸€**ï¼šåœ¨ä½ çš„ fork ä¸Šç»´æŠ¤ç‹¬ç«‹åˆ†æ”¯
- **æ–¹æ¡ˆäºŒ**ï¼šä½¿ç”¨ git stash æš‚å­˜ä¿®æ”¹ï¼Œæ›´æ–°åé‡æ–°åº”ç”¨
- **æ–¹æ¡ˆä¸‰**ï¼šå‘ä¸Šæ¸¸æäº¤ PRï¼Œè®©ä½ çš„ä¿®æ”¹åˆå¹¶åˆ°ä¸»ä»“åº“

### Q: å¦‚ä½•æŸ¥çœ‹ä¸Šæ¸¸æœ‰å“ªäº›æ›´æ–°ï¼Ÿ

A: 

```bash
# è·å–ä¸Šæ¸¸ä¿¡æ¯
git fetch upstream

# æŸ¥çœ‹æ›´æ–°æ—¥å¿—
git log HEAD..upstream/main --oneline

# æŸ¥çœ‹è¯¦ç»†å·®å¼‚
git diff HEAD..upstream/main
```

### Q: å¯ä»¥é€‰æ‹©æ€§æ›´æ–°æŸäº›æ–‡ä»¶å—ï¼Ÿ

A: å¯ä»¥ï¼Œä½†éœ€è¦æ‰‹åŠ¨æ“ä½œï¼š

```bash
# è·å–ä¸Šæ¸¸æ›´æ–°
git fetch upstream

# åªæ›´æ–°ç‰¹å®šæ–‡ä»¶
git checkout upstream/main -- src/components/æŸä¸ªæ–‡ä»¶.jsx

# æäº¤
git commit -m "Update specific file from upstream"
```

### Q: æ›´æ–°å¤±è´¥äº†æ€ä¹ˆåŠï¼Ÿ

A: 

1. å¦‚æœä½¿ç”¨äº† `npm run update`ï¼Œå¤‡ä»½æ–‡ä»¶ä¼šè¢«ä¿ç•™
2. æŸ¥çœ‹é”™è¯¯ä¿¡æ¯ï¼Œç¡®å®šå¤±è´¥åŸå› 
3. å¯ä»¥ä½¿ç”¨ `git reset --hard` å›é€€åˆ°æ›´æ–°å‰çš„çŠ¶æ€
4. å¦‚æœæœ‰å¤‡ä»½ç›®å½•ï¼Œæ‰‹åŠ¨æ¢å¤æ–‡ä»¶
5. å¯»æ±‚å¸®åŠ©ï¼šåœ¨ GitHub Issues ä¸­æé—®

## ğŸ¯ æœ€ä½³å®è·µ

### 1. å®šæœŸæ›´æ–°

å»ºè®®æ¯æœˆæ£€æŸ¥ä¸€æ¬¡ä¸Šæ¸¸æ›´æ–°ï¼š

```bash
git fetch upstream
git log HEAD..upstream/main --oneline
```

### 2. åˆ†æ”¯ç­–ç•¥

- `main` åˆ†æ”¯ï¼šä¿æŒä¸ä¸ªäººé…ç½®åŒæ­¥
- `upstream` åˆ†æ”¯ï¼šè·Ÿè¸ªä¸Šæ¸¸ä»“åº“ï¼ˆå¯é€‰ï¼‰
- `custom` åˆ†æ”¯ï¼šé‡å¤§è‡ªå®šä¹‰ä¿®æ”¹ï¼ˆå¯é€‰ï¼‰

### 3. æ–‡æ¡£åŒ–ä¿®æ”¹

å¦‚æœä½ ä¿®æ”¹äº†æºä»£ç ï¼Œå»ºè®®ï¼š
- åœ¨é¡¹ç›®ä¸­åˆ›å»º `CUSTOMIZATIONS.md` è®°å½•ä¿®æ”¹
- ä½¿ç”¨ git commit è¯¦ç»†æè¿°ä¿®æ”¹åŸå› 
- è€ƒè™‘å‘ä¸Šæ¸¸æäº¤ PR

### 4. æµ‹è¯•ç¯å¢ƒ

åœ¨æ›´æ–°å‰ï¼Œå¯ä»¥åœ¨æµ‹è¯•åˆ†æ”¯ä¸Šå…ˆå°è¯•ï¼š

```bash
# åˆ›å»ºæµ‹è¯•åˆ†æ”¯
git checkout -b test-update

# åœ¨æµ‹è¯•åˆ†æ”¯ä¸Šæ›´æ–°
npm run update

# æµ‹è¯•æ— é—®é¢˜ååˆå¹¶åˆ° main
git checkout main
git merge test-update
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [INIT_GUIDE.md](./INIT_GUIDE.md) - åˆå§‹åŒ–æŒ‡å—
- [USER_GUIDE.md](./USER_GUIDE.md) - ä½¿ç”¨æŒ‡å—
- [config.example.yml](./config.example.yml) - é…ç½®æ–‡ä»¶ç¤ºä¾‹

## ğŸ’¡ è·å–å¸®åŠ©

å¦‚æœé‡åˆ°é—®é¢˜ï¼š

1. æŸ¥çœ‹ [GitHub Issues](https://github.com/mappedinfo/ppage/issues)
2. æäº¤æ–°çš„ Issue æè¿°ä½ çš„é—®é¢˜
3. æŸ¥çœ‹ä¸Šæ¸¸ä»“åº“çš„æ›´æ–°æ—¥å¿—
4. å‚è€ƒ Git æ–‡æ¡£å’Œæ•™ç¨‹

## ğŸ” å®‰å…¨æç¤º

- æ›´æ–°å‰åŠ¡å¿…å¤‡ä»½é‡è¦æ•°æ®
- ä¸è¦åœ¨ `.gitignore` ä¸­ç§»é™¤ç”¨æˆ·æ–‡ä»¶ä¿æŠ¤è§„åˆ™
- å®šæœŸæ¨é€åˆ°è¿œç¨‹ä»“åº“ä½œä¸ºå¤‡ä»½
- è€ƒè™‘ä½¿ç”¨ GitHub çš„ fork åŒæ­¥åŠŸèƒ½

---

ç¥ä½ æ›´æ–°é¡ºåˆ©ï¼å¦‚æœæœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿æ Issueã€‚ğŸš€
